# F1T GUI主界面設計與實現

## 📋 文檔資訊
- **文檔類型**: 功能開發
- **創建日期**: 2025-08-25
- **最後更新**: 2025-08-25 17:30
- **作者**: AI代理 + 用戶協作設計
- **版本**: 2.0.0
- **相關項目**: 20250825-FEATURE-001

## 🎯 項目追蹤資訊
- **項目ID**: 20250825-FEATURE-001
- **項目名稱**: F1T GUI主界面設計與實現
- **項目類型**: 功能開發
- **優先級**: ⚠️ 高
- **狀態**: ✅ 修復完成，程式可正常執行
- **完成度**: 100%
- **預期目標**: 
  1. ✅ 完成專業GUI主界面框架 (Style H)
  2. ✅ 實現MDI多視窗管理系統
  3. ✅ 集成高級視窗操作功能
  4. ✅ 修復 f1t_gui_main.py 使其可正常執行
  5. ✅ 修復導入錯誤和字體問題
- **實際結果**: 
  1. ✅ GUI主界面完成，支援專業暗色主題
  2. ✅ MDI系統完全實現，包含tile、cascade、minimize/maximize/restore/close all、fullscreen等功能
  3. ✅ 圖表交互功能完成，支援固定線和數值顯示
  4. ✅ 修復了 f1t_gui_main.py 的 math 和 random 模組導入問題
  5. ✅ 修復了字體大小設置錯誤 (font-size: 0pt -> 1pt)
  6. ✅ 程式可正常執行，所有視窗都能正確顯示和互動
- **相關檔案**: 
  - f1t_gui_main.py (修復版本，可正常執行)
  - f1t_gui_main_clean.py (乾淨版本，無demo功能)
- **測試狀態**: ✅ 程式執行驗證完成，GUI功能正常
- **開始日期**: 2025-08-25
- **完成日期**: 2025-08-25 (修復完成)
- **負責人**: AI代理 + 用戶
- **備註**: f1t_gui_main.py 已修復並可正常執行，保留原始 Style H 設計，準備進行降雨分析模組開發

## 📊 Phase1 完成狀態 (✅ 已完成)

### ✅ 已完成功能
1. **主視窗架構** - 專業暗色主題，完整選單結構
2. **MDI多視窗系統** - 支援子視窗的完整生命週期管理
3. **視窗管理功能** - tile、cascade、minimize/maximize/restore/close all windows、fullscreen toggle
4. **左側控制面板** - 模組樹、快速分析按鈕、系統狀態顯示
5. **圖表交互系統** - 支援固定線設置和數值顯示
6. **狀態管理** - 完整的狀態列和系統訊息顯示
7. **錯誤處理** - 強健的異常處理和用戶反饋機制
8. **生產化處理** - 移除所有demo代碼，正式命名為f1t_gui_main.py

### 🎯 下一階段目標 (Phase2)
1. **降雨分析模組集成** - 根據用戶需求實現完整的降雨分析功能
2. **真實數據載入** - 整合現有F1分析模組系統
3. **pytest測試套件** - 確保所有GUI功能的穩定性## 📋 詳細技術需求確認 (2025-08-25)

### 1. MDI多視窗行為細節
- **Q1**: ✅ 允許同一分析功能開啟多個視窗 (不同參數)
- **Q2**: ✅ 視窗標題格式: "功能名稱 - 年份 賽事 賽段" (例: "降雨強度分析 - 2025 Japan Race")
- **Q3**: ✅ 視窗關閉時不需詢問保存

### 2. Table和Chart並排顯示
- **Q4**: ✅ 支援比例調整 (可拖拽分隔線)
- **Q5**: ✅ 只顯示可用的資料類型 (Table或Chart或兩者)
- **Q6**: ✅ 支援三種檢視模式快速切換: "只顯示Table"、"只顯示Chart"、"並排顯示"

### 3. 數據聯動機制
- **Q7**: ✅ 聯動模式開啟時參數變更立即生效
- **Q8**: ✅ 聯動更新不需loading指示器 (模擬數據)
- **Q9**: ✅ 分析執行中的聯動更新: 等待當前任務完成

### 4. 搜尋和篩選功能
- **Q10**: ✅ 支援模糊搜尋 (例: "雨天"→"降雨強度分析")
- **Q11**: ✅ 支援標籤篩選 (基礎分析、進階分析等分類)
- **Q12**: ✅ 搜尋結果高亮顯示

### 5. 收藏夾功能
- **Q13**: ✅ 保存"分析組合" (多個相關分析的組合)
- **Q14**: ✅ 支援分類 (車手分析類、賽事分析類等)
- **Q15**: ✅ 支援收藏夾匯出/匯入功能

### 6. 批次分析流程
- **Q16**: ✅ 按照用戶選擇順序執行
- **Q17**: ✅ 單個任務失敗時繼續執行剩餘任務
- **Q18**: ✅ 完成後顯示Table或Chart (暫不生成總結報告)

### 7. 進度和任務管理
- **Q19**: ✅ 進度顯示: 每個視窗內 + 全局狀態列 (兩者都要)
- **Q20**: ✅ 長時間任務取消: 全部取消，不詢問用戶
- **Q21**: ✅ 需要任務歷史記錄功能

### 8. 快取管理
- **Q22**: ✅ 顯示快取檔案詳細信息 (大小、創建時間等)
- **Q23**: ❌ 不需要快取手動備份和還原
- **Q24**: ❌ 不需要時間條件的快取清理

### 9. 圖表功能 (使用PyQt而非matplotlib)
- **Q25**: ❌ 不使用matplotlib，使用PyQt，不需支援多格式匯出
- **Q26**: ❌ 不需要自定義工具提示格式
- **Q27**: ❌ 不需要全螢幕檢視模式

### 10. 界面細節
- **Q28**: ✅ 左側功能樹寬度無限制，用戶可調整，寬度自適應文字長度
- **Q29**: ✅ 狀態列區域支援點擊操作 (例: 點擊快取狀態→開啟快取管理器)
- **Q30**: ✅ 支援界面佈局保存和恢復 (記憶視窗排列)

## 🔍 最終架構確認 (2025-08-25)

### 11. PyQt圖表系統
- **Q31**: ✅ 選擇 **PyQtGraph** - 開源且性能優異

### 12. 現有模組整合策略
- **Q32**: ✅ 使用 **python.py參數化調用並讀取JSON數據**
  - 調用方式: `python f1_analysis_modular_main.py -f [功能號] -y [年份] -r [賽事] -s [賽段]`
  - 數據來源: 讀取json/目錄下的分析結果JSON檔案
  - 優勢: 保持與現有CLI系統完全相容，確保數據一致性

### 13. 賽段參數顯示
- **Q33**: ✅ **完整參數選擇** - 需要顯示年份、賽事、賽段三個選擇器
  - 年份選擇: 下拉選單 (2024, 2025)
  - 賽事選擇: 下拉選單 (完整賽事列表)
  - 賽段選擇: 下拉選單 (R, Q, FP1, FP2, FP3, S)

### 14. 任務歷史記錄
- **Q34**: ✅ 選擇 **JSON檔案** 儲存格式

### 15. 收藏夾分析組合
- **Q35**: ✅ 選擇 **由用戶選擇顯示方式**

### 16. 真實數據載入策略
- **Q36**: ✅ 選擇 **按需載入** - 第一次使用時才載入

### 17. 錯誤處理顯示
- **Q37**: ✅ 選擇 **選項B + 選項C** - 視窗內錯誤信息 + 可選錯誤日誌視窗

### 18. 介面響應性保證
- **Q38**: ✅ 選擇 **QThread + Worker模式**

## � 最終技術細節確認 (2025-08-25)

### 19. 進度追蹤實現
- **Q42**: 進度追蹤實現方式？
  - 選項A: 輪詢臨時狀態檔案
  - 選項B: 修改現有模組增加進度輸出
  - 選項C: 預估時間顯示（無實時進度）
- **答案**: ✅ 選擇 **選項C** - 只告訴使用者載入中

### 20. 分頁式MDI行為
- **Q43**: 分頁和MDI的組合方式？
  - 選項A: 每個分頁獨立的MDI區域
  - 選項B: 全局MDI下的分頁組織
  - 選項C: 分頁切換保留MDI視窗狀態
- **答案**: ✅ 選擇 **選項C** - 分頁切換保留視窗狀態

### 21. 數據聯動實現流程
- **Q44**: 參數變更時的聯動流程？
  - 流程A: 用戶改變賽事 → 重新調用相關模組 → 更新JSON → 刷新所有相關視窗
  - 流程B: 用戶改變賽事 → 檢查快取 → 調用模組 → 更新JSON → 刷新視窗
  - 流程C: 批次更新所有相關分析
- **答案**: ✅ 選擇 **流程B** - 用戶改變賽事 → 重新調用相關模組 → 檢查是否有暫存檔 → 更新JSON → 刷新所有相關視窗

### 22. 快取系統GUI整合
- **Q45**: 現有cache/目錄如何與GUI整合？
  - 選項A: 只檢查快取狀態，不顯示
  - 選項B: 在狀態列顯示快取統計
  - 選項C: 提供快取檢視器
- **答案**: ✅ 選擇 **選項B + 選項C** - GUI顯示快取狀態 + 快取檢視器

## �🚀 開發優先級排序 (1-8)
1. **主視窗框架 + MDI系統** (最優先)
2. **功能樹狀導航 + 搜尋**
3. **單一分析視窗 (Table+Chart)**
4. **數據聯動機制**
5. **批次分析功能**
6. **收藏夾系統**
7. **任務歷史記錄**
8. **快取管理器** (最後實現)

## 🎯 第一階段MVP確認
✅ **核心功能**: 主視窗 + 功能樹 + 單一分析視窗 + 基本的真實數據載入

## 📊 更新的主界面布局設計 (增加分頁功能)

```
┌────────────────────────────────────────────────────────────────────────────────┐
│ 🏎️ F1 Analysis GUI v5.5                                           [─] [□] [×] │
├────────────────────────────────────────────────────────────────────────────────┤
│ 📊 參數控制區 (完整參數選擇)                                                    │
│ ┌─────────┬─────────┬─────────┬──────────────┬─────────────────────────────────┐ │
│ │年份選擇 │賽事選擇 │賽段選擇 │數據聯動開關  │控制按鈕                         │ │
│ │2025 ▼  │Japan ▼ │Race ▼  │[●] 聯動模式 │[執行] [批次] [停止] [清快取]   │ │
│ └─────────┴─────────┴─────────┴──────────────┴─────────────────────────────────┘ │
├────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────┬──────────────────────────────────────────────────────┐ │
│ │ 🌲 功能樹狀導航      │ 📊 多視窗分析區域 (MDI + 分頁式)                  │ │
│ │ (左側 - 可調整大小)  │ (右側 - 可拖拽、分頁、並排顯示)                   │ │
│ │                    │                                                      │ │
│ │ [🔍搜尋框]         │ ┌─[分頁標籤列]─────────────────────────────────────┐ │ │
│ │                    │ │[降雨分析] [車手比較] [彎道分析] [+新分頁]      │ │ │
│ │ ⭐ 收藏夾           │ └─────────────────────────────────────────────────┘ │ │
│ │ ├─ 常用分析組合     │                                                      │ │
│ │                    │ ┌─[當前分頁: 降雨分析]─────────────────────────────┐ │ │
│ │ 📋 基礎分析模組     │ │ MDI視窗區域:                                     │ │ │
│ │ ├─🌧️ 降雨強度分析   │ │ ┌─[視窗1]─────┐ ┌─[視窗2]─────┐               │ │ │
│ │ ├─🛣️ 賽道路線分析   │ │ │📊 Table      │ │📈 Chart      │               │ │ │
│ │ ├─🏆 車手最快進站   │ │ │              │ │              │               │ │ │
│ │ └─... (共10項)     │ │ └──────────────┘ └──────────────┘               │ │ │
│ │                    │ │                                                 │ │ │
│ │ 🔧 進階分析模組     │ │ ┌─[視窗3: Table+Chart並排]───────────────────┐ │ │ │
│ │ ├─📡 車手遙測分析   │ │ │📊 Table │ 📈 Chart                        │ │ │ │
│ │ ├─🤝 雙車手比較     │ │ │         │                                 │ │ │ │
│ │ ├─🎯 動態彎道檢測   │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ └─... (共14項)     │ └─────────────────────────────────────────────────┘ │ │
│ │                    │                                                      │ │
│ │ 🚀 系統功能         │ [視窗控制] [平鋪] [層疊] [最小化] [檢視模式切換]    │ │
│ │ ├─📊 快取管理       │                                                      │ │
│ │ ├─🔍 系統診斷       │                                                      │ │
│ │ └─... (共5項)      │                                                      │ │
│ └─────────────────────┴──────────────────────────────────────────────────────┘ │
├────────────────────────────────────────────────────────────────────────────────┤
│ 📊 狀態列: [任務進度] [快取狀態] [API狀態🔴] [錯誤訊息] [系統狀態]           │
└────────────────────────────────────────────────────────────────────────────────┘
```

## ⚠️ 關鍵開發原則提醒
- 🚫 **絕對禁止使用模擬數據** - 必須整合真實的F1 telemetry數據
- 🔧 **使用PyQtGraph圖表系統** - 開源且性能優異的圖表組件
- 📊 **JSON數據整合** - 透過參數化調用現有模組並讀取JSON結果
- 🎯 **用戶體驗優先** - QThread + Worker模式確保響應性
- 📋 **完整參數控制** - 年份、賽事、賽段三個選擇器
- 🔖 **分頁式MDI** - 結合分頁和MDI的混合視窗管理

## 📊 當前狀態
- ✅ 需求分析完成
- ✅ 界面設計確定
- ✅ 詳細技術需求確認完成 (45項細節需求)
- ✅ 技術架構最終確認完成
- ✅ Phase 1 開發文檔已創建
- ⏳ 準備開始Phase 1程式碼實現
- ❌ GUI組件尚未創建

## 🔄 下一步計劃
1. **立即開始**: Phase 1 主視窗框架實現
2. **創建檔案**: gui/main.py 和相關組件
3. **建立測試**: 基本功能驗證測試
4. **文檔追蹤**: 持續更新開發進度

## 🔗 相關文件
- F1_Analysis_Main_Menu.bat (原有CLI系統)
- f1_analysis_modular_main.py (後端模組)
- modules/ (53個分析功能模組)
- docs/development_tracking/PHASE1_20250825_主視窗框架實現.md (Phase 1詳細文檔)*: 20250825-FEATURE-001
- **項目名稱**: F1T GUI主界面設計與實現
- **項目類型**: 功能開發
- **優先級**: 🚨 極高
- **狀態**: 📋 規劃中
- **完成度**: 15%
- **預期目標**: 實現基於PyQt的F1分析GUI主界面，整合現有53個分析功能
- **開始日期**: 2025-08-25
- **預計完成**: 2025-08-25
- **負責人**: AI代理

## 📖 項目概述
基於現有的F1_Analysis_Main_Menu.bat系統，設計並實現一個完整的GUI界面，支持53個F1分析功能的圖形化操作、多視窗管理、數據聯動等高級功能。

## 🎯 核心功能需求

### 1. 主界面布局設計
```
┌────────────────────────────────────────────────────────────────────────────────┐
│ 🏎️ F1 Analysis GUI v5.5                                           [─] [□] [×] │
├────────────────────────────────────────────────────────────────────────────────┤
│ 📊 參數控制區 (僅顯示賽段選擇)                                                  │
│ ┌─────────┬─────────────────┬──────────────────────────────────────────────────┐ │
│ │賽段選擇 │ 數據聯動開關    │ 控制按鈕                                         │ │
│ │Race ▼  │ [●] 聯動模式   │ [執行選中] [批次執行] [停止] [清快取]           │ │
│ └─────────┴─────────────────┴──────────────────────────────────────────────────┘ │
├────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────┬──────────────────────────────────────────────────────┐ │
│ │ 🌲 功能樹狀導航      │ 📊 多視窗分析區域 (MDI)                           │ │
│ │ (左側 - 可調整大小)  │ (右側 - 可拖拽、並排顯示)                         │ │
│ │                    │                                                      │ │
│ │ [🔍搜尋框]         │ ┌─[視窗1: 降雨分析]─┐ ┌─[視窗2: 車手比較]─┐      │ │
│ │                    │ │📊 Table + Chart   │ │📈 Chart           │      │ │
│ │ ⭐ 收藏夾           │ │                   │ │                   │      │ │
│ │ ├─ 常用分析組合     │ └───────────────────┘ └───────────────────┘      │ │
│ │                    │                                                      │ │
│ │ 📋 基礎分析模組     │ ┌─[視窗3: 彎道分析]───────────────────────────┐      │ │
│ │ ├─🌧️ 降雨強度分析   │ │📊 Table (上) + 📈 Chart (下)              │      │ │
│ │ ├─🛣️ 賽道路線分析   │ │                                           │      │ │
│ │ ├─🏆 車手最快進站   │ │                                           │      │ │
│ │ └─... (共10項)     │ └───────────────────────────────────────────┘      │ │
│ │                    │                                                      │ │
│ │ 🔧 進階分析模組     │ [視窗控制] [平鋪] [層疊] [最小化] [新建視窗]        │ │
│ │ ├─📡 車手遙測分析   │                                                      │ │
│ │ ├─🤝 雙車手比較     │                                                      │ │
│ │ ├─🎯 動態彎道檢測   │                                                      │ │
│ │ └─... (共14項)     │                                                      │ │
│ │                    │                                                      │ │
│ │ 🚀 系統功能         │                                                      │ │
│ │ ├─📊 快取管理       │                                                      │ │
│ │ ├─🔍 系統診斷       │                                                      │ │
│ │ └─... (共5項)      │                                                      │ │
│ └─────────────────────┴──────────────────────────────────────────────────────┘ │
├────────────────────────────────────────────────────────────────────────────────┤
│ 📊 狀態列: [任務進度] [快取狀態] [API狀態🔴] [錯誤訊息] [系統狀態]           │
└────────────────────────────────────────────────────────────────────────────────┘
```

### 2. 功能組織結構 (53個功能)

#### 📋 基礎分析模組 (1-10)
1. 🌧️ 降雨強度分析
2. 🛣️ 賽道路線分析
3. 🏆 車手最快進站時間排行榜
4. 🏁 車隊進站時間排行榜
5. 🛞 車手進站詳細記錄
6. 🚨 事故統計摘要分析
7. ⚠️ 嚴重程度分佈分析
8. 📋 所有事件詳細列表分析
9. 🚨 特殊事件報告分析
10. 🔑 關鍵事件摘要分析

#### 🔧 進階分析模組 (11-24)
11. 🏎️ 單一車手綜合分析
12. 📡 單一車手詳細遙測分析
13. 🤝 雙車手比較分析
14. 📈 賽事位置變化圖
15. 🏁 賽事超車統計分析
16. 🏁 單一車手超車分析
17. 🎯 動態彎道檢測分析 ⭐
18. 🎯 彎道詳細分析
19. 📊 單一車手DNF分析
20. 📊 單一車手全部彎道詳細分析
21. 👥 所有車手綜合分析
22. 🚀 彎道速度分析
23. 🏎️ 全部車手超車分析
24. 📊 全部車手DNF分析

#### 🏎️ 分拆功能 (25-28)
25. 🏁 車手比賽位置分析
26. 🛞 車手輪胎策略分析
27. ⚡ 車手最速圈速分析
28. ⏱️ 車手每圈圈速分析

#### 🚀 系統功能 (49-53)
49. 📊 數據導出管理
50. 🔄 暫存優化
51. 🔍 系統診斷
52. ⚡ 性能基準測試
53. 🛡️ 數據完整性檢查

## 🔧 技術實現要求

### 🏗️ 通用視窗管理架構 (解決50+模組管理問題)

#### 架構設計原則
採用**通用視窗模組 + 配置驅動**模式，避免為53個功能創建53個獨立視窗檔案：

```
gui/
├── windows/
│   ├── __init__.py
│   ├── base_analysis_window.py      # 通用分析視窗基類
│   ├── table_chart_window.py        # Table+Chart標準視窗
│   ├── specialized_windows/         # 特殊功能專用視窗
│   │   ├── corner_detection_window.py  # 動態彎道檢測專用
│   │   ├── dnf_analysis_window.py      # DNF分析專用
│   │   └── cache_manager_window.py     # 快取管理專用
│   └── window_factory.py            # 視窗工廠類
├── config/
│   ├── function_configs.json        # 53個功能的配置定義
│   └── window_templates.json        # 視窗模板配置
└── models/
    └── function_definition.py       # 功能定義數據模型
```

#### 核心組件設計

**1. 通用分析視窗基類**
```python
class BaseAnalysisWindow(QMdiSubWindow):
    """所有分析視窗的基類，提供統一接口"""
    
    def __init__(self, function_config, parent=None):
        super().__init__(parent)
        self.function_config = function_config
        self.function_id = function_config['id']
        self.function_name = function_config['name']
        self.window_type = function_config['window_type']
        
    def load_analysis_data(self, year, race, session):
        """載入分析數據的統一接口"""
        
    def display_results(self, data):
        """顯示分析結果的統一接口"""
```

**2. 功能配置驅動**
```json
{
  "functions": [
    {
      "id": 1,
      "name": "降雨強度分析",
      "category": "基礎分析",
      "window_type": "table_chart",
      "has_table": true,
      "has_chart": true,
      "chart_type": "line",
      "cli_params": ["-f", "1"],
      "json_file_pattern": "function_1_{year}_{race}_{session}.json",
      "table_columns": ["時間", "降雨強度", "賽道狀況"],
      "icon": "rain.png"
    },
    {
      "id": 17,
      "name": "動態彎道檢測分析",
      "category": "進階分析", 
      "window_type": "specialized",
      "specialized_class": "CornerDetectionWindow"
    }
  ]
}
```

**3. 視窗工廠模式**
```python
class AnalysisWindowFactory:
    """根據功能ID動態創建對應視窗"""
    
    def create_window(self, function_id, year, race, session):
        config = self.function_configs[function_id]
        
        if config['window_type'] == 'table_chart':
            return TableChartWindow(config, year, race, session)
        elif config['window_type'] == 'specialized':
            return self.create_specialized_window(config)
        else:
            return BaseAnalysisWindow(config, year, race, session)
```

#### 架構優勢
- ✅ **代碼重用**: 大部分功能共用標準視窗模板
- ✅ **配置驅動**: 新增功能只需修改JSON配置
- ✅ **易於維護**: 視窗邏輯集中管理，避免53個重複檔案
- ✅ **擴展性強**: 特殊功能可使用專用視窗
- ✅ **一致性**: 統一的界面風格和行為

#### 主視窗整合方式
```python
class MainWindow(QMainWindow):
    def on_function_selected(self, function_id):
        """功能樹選擇事件 - 工廠模式創建視窗"""
        year = self.parameter_panel.get_year()
        race = self.parameter_panel.get_race()
        session = self.parameter_panel.get_session()
        
        # 使用工廠創建對應視窗
        analysis_window = self.window_factory.create_window(
            function_id, year, race, session
        )
        
        # 添加到MDI工作區
        self.mdi_workspace.add_window(analysis_window)
```

### PyQt完整架構設計
```python
gui/
├── main.py                         # 應用程式入口點
├── main_window.py                  # 主視窗 (QMainWindow + QMdiArea)
├── windows/                        # 🆕 通用視窗管理系統
│   ├── __init__.py
│   ├── base_analysis_window.py     # 通用分析視窗基類
│   ├── table_chart_window.py       # Table+Chart標準視窗  
│   ├── specialized_windows/        # 特殊功能專用視窗
│   │   ├── corner_detection_window.py
│   │   ├── dnf_analysis_window.py
│   │   └── cache_manager_window.py
│   └── window_factory.py           # 視窗工廠類
├── dialogs/
│   ├── parameter_dialog.py         # 參數設置對話框
│   ├── batch_analysis_dialog.py    # 批次分析配置
│   ├── favorites_manager.py        # 收藏夾管理
│   └── cache_viewer.py             # 快取檢視器
├── widgets/
│   ├── function_tree.py            # 功能樹狀導航
│   ├── analysis_window.py          # 單個分析視窗
│   ├── progress_manager.py         # 進度管理器
│   ├── status_bar.py              # 狀態列
│   └── data_linker.py             # 數據聯動管理
├── config/                         # 🆕 配置驅動系統
│   ├── function_configs.json       # 53個功能的配置定義
│   └── window_templates.json       # 視窗模板配置
├── models/
│   ├── function_model.py           # 功能數據模型
│   ├── analysis_model.py           # 分析結果模型
│   ├── cache_model.py             # 快取數據模型
│   └── function_definition.py     # 🆕 功能定義數據模型
└── resources/
    ├── icons/                      # 功能圖示
    └── styles/                     # 樣式檔案
```

### 核心功能實現
- **通用視窗管理**: 工廠模式 + 配置驅動，避免53個重複視窗檔案
- **MDI多視窗管理**: QMdiArea + QMdiSubWindow
- **分頁式工作區**: QTabWidget + QMdiArea混合模式
- **可拖拽面板**: QSplitter
- **樹狀導航**: QTreeWidget + 自定義模型
- **搜尋功能**: QLineEdit + 即時篩選
- **數據聯動**: 信號槽機制
- **進度管理**: QProgressBar + QThread
- **圖表整合**: PyQtGraph + QWidget
- **表格顯示**: QTableWidget + 可排序

## ⚠️ 重要技術細節

### 數據聯動機制
- 全局參數變更時，所有開啟的分析視窗自動更新
- 聯動開關控制是否啟用自動更新
- 支援手動刷新功能

### 多視窗管理
- 每個分析功能可獨立視窗顯示
- 支援同一視窗內標籤頁切換
- 視窗大小、位置記憶功能
- Table和Chart可並排或上下排列

### 批次分析
- 多選功能執行
- 任務佇列管理
- 可取消長時間執行的任務
- 無限制同時執行任務數

### 圖表功能
- matplotlib 整合
- 支援縮放、平移
- 數據點工具提示
- 可匯出圖片

## 📊 整合現有系統
- 保留原有.bat檔案
- 整合現有53個Python模組
- 利用現有快取機制
- 預留API狀態指示器
- 繼承現有錯誤處理機制

## 🔄 開發里程碑
1. **Phase 1**: 主框架搭建 (主視窗+基本布局) ✅ **已完成**
2. **Phase 2**: 功能樹狀導航實現
3. **Phase 3**: MDI多視窗系統 ✅ **已完成**
4. **Phase 4**: 分析功能整合
5. **Phase 5**: 數據聯動機制
6. **Phase 6**: 批次分析功能
7. **Phase 7**: 進階功能(收藏夾、搜尋等)
8. **Phase 8**: 測試與優化

## 📋 當前狀態 (最後更新: 2025-08-25 Phase 1完成)
- ✅ 需求分析完成
- ✅ 界面設計確定  
- ✅ 技術架構規劃完成
- ✅ **Phase 1主框架實現完成 (主視窗+MDI系統)**
- ✅ **圖表高級交互功能 (固定線+鎖定圖標+恆定數值)**
- ✅ **完整視窗管理功能 (平鋪/層疊/最小/最大/還原/關閉/全螢幕)**
- ⏳ **Phase 2功能樹狀導航規劃中** 
- ❌ 分析功能整合未開始

## 🚀 Phase 1 實現完成清單
### ✅ 核心功能已實現:
1. **主視窗框架** - 基於PyQt5的MDI主視窗
2. **圖表互動系統** - TelemetryChartWidget
   - Ctrl+左鍵固定虛線位置
   - 右鍵清除固定線
   - 鎖定圖標顯示
   - 恆定數值標籤 (縮放/平移不變)
3. **視窗管理系統** - 完整MDI操作
   - 平鋪視窗 (tile_windows)
   - 層疊視窗 (cascade_windows) 
   - 最小化所有 (minimize_all_windows)
   - 最大化所有 (maximize_all_windows)
   - 還原所有 (restore_all_windows)
   - 關閉所有 (close_all_windows)
   - 全螢幕切換 (toggle_fullscreen)
4. **選單系統** - 完整視窗操作選單

### 🎯 技術實現重點:
- 固定線數值恆定機制 (save/restore真實數據值)
- MDI子視窗完整生命週期管理
- PyQt5事件處理系統 (滑鼠點擊/繪製)
- 除錯輸出和狀態反饋系統

## 🔗 相關文件
- F1_Analysis_Main_Menu.bat (原有CLI系統)
- f1_analysis_modular_main.py (後端模組)
- modules/ (53個分析功能模組)

---
*本文檔遵循F1T開發追蹤原則，記錄GUI開發的完整歷程*
